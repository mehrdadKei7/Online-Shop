<%- include('../includes/head.ejs') %> <%- include('../includes/heading.ejs') %>
<%- include('../includes/navigation.ejs') %>

<main>
  <div class="container">
    <form
      action="/admin/<% if(editing){  %>edit-product<% } else { %>addProduct<% } %>"
      method="post"
      enctype="multipart/form-data"
    >
      <input type="hidden" name="_csrf" value="<%= csrfToken %>" />
      <div class="form-group d-flex flex-column">
        <label for="title" class="flex-shrink-0">عنوان</label>
        <input
          type="text"
          class="form-control mt-2"
          id="title"
          name="title"
          placeholder="نام محصول را وارد کنید"
          value="<%= typeof title !== 'undefined' ? title : (editing ? product.title : '') %>"
        />
      </div>
      <div class="form-group">
        <label for="title">قیمت</label>
        <input
          type="number"
          class="form-control"
          id="price"
          name="price"
          placeholder="قیمت محصول را وارد کنید"
          value="<%= typeof price !== 'undefined' ? price : (editing ? product.price : '') %>"
        />
      </div>
      <div class="form-group">
        <label for="image"> تصویر </label>
        <input
          type="file"
          class="form-control"
          id="image"
          name="image"
        
          value="<%= typeof image !== 'undefined' ? image : (editing ? product.image : '') %>"
        />
      </div>
      <div class="form-group">
        <label for="title">توضیحات</label>
        <textarea class="form-control" name="description" cols="30" rows="10">
<%= typeof description !== 'undefined' ? description : (editing ? product.description :'') %>
      </textarea
        >
      </div>
      <% if(editing) { %>
      <input type="hidden" value="<%= product._id %>" name="productId" />
      <% } %> <% if (typeof errorMessage !== 'undefined') { %>
      <div class="alert"><%= errorMessage %></div>
      <% } %>

      <button type="submit" class="btn btn-primary">
        <% if(editing) { %>  به روز رسانی <% }else { %>افزودن محصول <% } %>
      </button>
    </form>
  </div>
</main>

<%- include('../includes/end.ejs') %>
